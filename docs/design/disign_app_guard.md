# Design: Guardian App

## Технологический стек

Код: `frontend/apps/guardian-app/` (Vue 3 + Vite + TypeScript)

**Основные технологии:**
- Vue 3 с Composition API
- TypeScript для типобезопасности
- Pinia для state management (`src/stores/*`)
- Vue Router для навигации
- Axios для HTTP запросов
- Chart.js для графиков телеметрии
- date-fns для работы с датами
- Vite для сборки

## Дизайн-система

### Цветовая палитра

**Premium Dark Theme:**
- Primary: `#6366f1` (индиго)
- Primary Dark: `#4f46e5`
- Primary Light: `#818cf8`
- Secondary: `#8b5cf6` (фиолетовый)
- Accent: `#ec4899` (розовый)

**Статусные цвета:**
- Success: `#10b981` (зеленый)
- Success Dark: `#059669`
- Warning: `#f59e0b` (оранжевый)
- Warning Dark: `#d97706`
- Danger: `#ef4444` (красный)
- Danger Dark: `#dc2626`
- Info: `#3b82f6` (синий)
- Info Dark: `#2563eb`

**Фоны (темная тема):**
- Primary: `#0f172a` (темно-синий)
- Secondary: `#1e293b` (серо-синий)
- Tertiary: `#334155` (светло-серый)
- Card: `#1e293b`
- Card Hover: `#334155`
- Overlay: `rgba(15, 23, 42, 0.8)`

**Текст:**
- Primary: `#f1f5f9` (почти белый)
- Secondary: `#cbd5e1` (светло-серый)
- Tertiary: `#94a3b8` (серый)
- Muted: `#64748b` (темно-серый)

**Границы:**
- Border: `#334155`
- Border Hover: `#475569`

### Тени и эффекты

- Shadow SM: мягкая тень для мелких элементов
- Shadow: стандартная тень
- Shadow MD: средняя тень
- Shadow LG: крупная тень
- Shadow Glow: свечение с primary цветом
- Shadow Glow Primary: усиленное свечение

### Радиусы скругления

- Standard: `12px`
- Large: `16px`
- XL: `20px`

### Градиенты

- Primary Gradient: `linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%)`
- Card Gradient: `linear-gradient(135deg, #1e293b 0%, #334155 100%)`
- Overlay Gradient: `linear-gradient(180deg, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 0.9) 100%)`

### Типографика

- Шрифт: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`
- Font smoothing: antialiased
- Line height: `1.6`

### Фоновые эффекты

- Радиальные градиенты для создания глубины:
  - `radial-gradient(at 0% 0%, rgba(99, 102, 241, 0.1) 0px, transparent 50%)`
  - `radial-gradient(at 100% 100%, rgba(139, 92, 246, 0.1) 0px, transparent 50%)`

## Структура экранов

### 1. Login View (Авторизация)

**Путь:** `/login`

**Компоненты:**
- Форма входа (email/пароль)
- Кнопка входа с градиентным фоном
- Ссылка на регистрацию
- Обработка ошибок авторизации

**UI особенности:**
- Premium дизайн с градиентным фоном
- Анимация загрузки
- Валидация полей

### 2. Register View (Регистрация)

**Путь:** `/register`

**Компоненты:**
- Форма регистрации (имя, email, пароль, подтверждение)
- Валидация пароля
- Кнопка регистрации
- Ссылка на вход

### 3. Dashboard View (Главная страница)

**Путь:** `/dashboard`

**Компоненты:**
- **Статистика:**
  - Количество подопечных
  - Количество устройств
  - Активные алерты
  - Критичные алерты
- **Последние алерты:**
  - Список последних алертов с фильтрацией
  - Быстрый переход к деталям
- **Список подопечных:**
  - Карточки подопечных с краткой информацией
  - Статусы (онлайн/офлайн)
  - Текущие показатели здоровья
  - Переход к детальной информации

**Особенности:**
- Real-time обновления через WebSocket (планируется)
- Автоматическое обновление данных
- Responsive grid layout

### 4. Wards View (Управление подопечными)

**Путь:** `/wards`

**Компоненты:**
- Список всех подопечных
- Поиск и фильтрация
- Карточки подопечных с:
  - Аватаром
  - Именем и возрастом
  - Статусом здоровья
  - Последней активностью
  - Количеством активных алертов
- Кнопка создания нового подопечного
- Сортировка по различным параметрам

**Функциональность:**
- Создание нового подопечного
- Редактирование существующих
- Удаление подопечного (с подтверждением)
- Массовые операции (планируется)

### 5. Ward Detail View (Детали подопечного)

**Путь:** `/wards/:id`

**Компоненты:**
- **Заголовок:**
  - Аватар и имя подопечного
  - Статус (онлайн/офлайн)
  - Кнопки действий (редактирование, удаление)
- **Текущие показатели здоровья:**
  - Пульс (heart_rate)
  - Температура (temperature)
  - Активность (steps)
  - Другие метрики
- **Графики телеметрии:**
  - `TelemetryChart` компонент
  - История за различные периоды (день, неделя, месяц)
  - Интерактивные графики Chart.js
- **Алерты подопечного:**
  - Список алертов с фильтрацией
  - Статусы алертов
  - Действия (acknowledge, resolve)
- **Привязанные устройства:**
  - Список устройств
  - Статусы устройств (подключено/отключено)
  - Управление устройствами
- **Карта местоположения:**
  - `WardLocationMap` компонент
  - Текущее местоположение подопечного
  - История перемещений (планируется)

**Особенности:**
- Real-time обновление телеметрии
- Экспорт данных в CSV/PDF
- Настройка пороговых значений для алертов

### 6. Devices View (Управление устройствами)

**Путь:** `/devices`

**Компоненты:**
- Список всех устройств
- Фильтрация по типу, статусу, подопечному
- Карточки устройств с:
  - Типом устройства
  - Серийным номером
  - Статусом подключения
  - Привязкой к подопечному
  - Последней активностью
- Кнопка добавления нового устройства
- Управление привязкой к подопечным

**Функциональность:**
- Регистрация новых устройств
- Привязка/отвязка от подопечных
- Просмотр истории использования
- Настройка параметров устройств

### 7. Alerts View (Управление алертами)

**Путь:** `/alerts`

**Компоненты:**
- Список всех алертов
- Фильтрация по:
  - Подопечному
  - Статусу (active, acknowledged, resolved)
  - Уровню серьезности (critical, warning, info)
  - Дате
- Карточки алертов с:
  - Типом алерта
  - Подопечным
  - Временем создания
  - Статусом
  - Действиями
- Сортировка и пагинация

**Функциональность:**
- Просмотр детальной информации об алерте
- Изменение статуса (acknowledge, resolve)
- Массовые операции
- Экспорт списка алертов

### 8. Settings View (Настройки)

**Путь:** `/settings`

**Компоненты:**
- **Профиль пользователя:**
  - Редактирование имени, email
  - Смена пароля
  - Аватар
- **Настройки уведомлений:**
  - Email уведомления
  - Push уведомления
  - Настройки частоты уведомлений
- **Настройки приложения:**
  - Тема (светлая/темная)
  - Язык
  - Часовой пояс
- **Безопасность:**
  - Двухфакторная аутентификация (планируется)
  - История входов
  - Активные сессии

## Компоненты

### TelemetryChart

**Назначение:** Отображение графиков телеметрии

**Функциональность:**
- Графики Chart.js (линейные, столбчатые)
- Выбор периода (день, неделя, месяц)
- Множественные метрики на одном графике
- Интерактивные подсказки
- Экспорт графика

### WardLocationMap

**Назначение:** Отображение местоположения подопечного на карте

**Функциональность:**
- Интеграция с картами (Yandex Maps / Google Maps)
- Маркер текущего местоположения
- История перемещений
- Геозоны (планируется)

## Архитектура состояния

**Pinia Stores:**
- `auth` — аутентификация, пользователь, токены
- `wards` — управление подопечными, список, детали
- `devices` — управление устройствами, статусы
- `alerts` — управление алертами, фильтрация

**API клиенты:**
- Централизованный клиент с автоматическим добавлением токенов
- Обработка ошибок
- Автоматическое обновление токенов
- Retry механизм

**Realtime:**
- WebSocket подключение (`src/services/realtime.ts`)
- Каналы для обновлений:
  - Телеметрия подопечных
  - Новые алерты
  - Изменения статусов устройств

## UX паттерны

### Навигация

- **Sidebar:** боковая панель навигации (планируется)
- **Top Navigation:** верхняя панель с breadcrumbs
- **Bottom Navigation:** нижняя навигация для мобильных (планируется)

### Интерактивность

- **Real-time обновления:** автоматическое обновление данных через WebSocket
- **Оптимистичные обновления:** UI обновляется сразу, затем синхронизируется
- **Loading states:** скелетоны и спиннеры при загрузке

### Обратная связь

- **Toast уведомления:** для успешных операций и ошибок
- **Статусные индикаторы:** цветовые бейджи для статусов
- **Анимации:** плавные переходы и hover эффекты

### Адаптивность

- **Responsive design:** адаптация под разные размеры экранов
- **Mobile-first:** оптимизация для мобильных устройств
- **Breakpoints:** адаптивные сетки для планшетов и десктопов

## Переменные окружения

```env
VITE_API_URL=http://localhost:3000/api/v1
VITE_WS_URL=ws://localhost:3000/ws
```

## Особенности

- Автоматическое обновление токенов
- Централизованная обработка ошибок
- Responsive дизайн
- Интерактивные графики телеметрии
- Real-time обновления (планируется)
- Premium темная тема с градиентами
- Плавные анимации и переходы
