# Как проверить запуск отдельных элементов проекта

## Быстрая проверка

Запустите скрипт проверки из корня проекта:

```powershell
.\scripts\check-services.ps1
```

Скрипт проверит:
- ✅ Инфраструктуру (PostgreSQL, Redis, RabbitMQ)
- ✅ Все бэкенд сервисы (12 микросервисов + API Gateway)
- ✅ Все фронтенд приложения (4 приложения)

## Варианты использования

### Проверка всех элементов
```powershell
.\scripts\check-services.ps1
```

### Проверка только инфраструктуры
```powershell
.\scripts\check-services.ps1 -Type infra
```

### Проверка только бэкенд сервисов
```powershell
.\scripts\check-services.ps1 -Type backend
```

### Проверка только фронтенд приложений
```powershell
.\scripts\check-services.ps1 -Type frontend
```

### Проверка конкретного сервиса
```powershell
.\scripts\check-services.ps1 -Type service -ServiceName auth
```

Доступные сервисы: `api-gateway`, `auth`, `user`, `device`, `telemetry`, `alert`, `location`, `billing`, `integration`, `dispatcher`, `analytics`, `ai-prediction`, `organization`

### Проверка конкретного порта
```powershell
.\scripts\check-services.ps1 -Type port -Port 3001
```

## Ручная проверка

### Проверка инфраструктуры

```powershell
# PostgreSQL
Test-NetConnection -ComputerName localhost -Port 5432

# Redis
Test-NetConnection -ComputerName localhost -Port 6379

# RabbitMQ
Test-NetConnection -ComputerName localhost -Port 5672
```

### Проверка бэкенд сервисов

Все сервисы имеют health check endpoint:

```powershell
# API Gateway
Invoke-WebRequest -Uri "http://localhost:3000/api/v1/health"

# Микросервисы (пример для Auth Service)
Invoke-WebRequest -Uri "http://localhost:3001/health"
```

**Порты сервисов:**
- API Gateway: 3000
- Auth Service: 3001
- User Service: 3002
- Device Service: 3003
- Telemetry Service: 3004
- Alert Service: 3005
- Location Service: 3006
- Billing Service: 3007
- Integration Service: 3008
- Dispatcher Service: 3009
- Analytics Service: 3010
- AI Prediction Service: 3011
- Organization Service: 3012

### Проверка фронтенд приложений

```powershell
# Guardian App
Invoke-WebRequest -Uri "http://localhost:5173"

# Dispatcher App
Invoke-WebRequest -Uri "http://localhost:5174"

# Admin App
Invoke-WebRequest -Uri "http://localhost:5175"

# Landing App
Invoke-WebRequest -Uri "http://localhost:5176"
```

## Запуск отдельных элементов

### Важно: Docker Desktop

Перед запуском инфраструктуры убедитесь, что **Docker Desktop запущен**:

```powershell
# Проверка Docker
docker ps

# Если Docker не запущен, вы увидите ошибку:
# error during connect: Get "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/...
# 
# Решение: Запустите Docker Desktop из меню Пуск и дождитесь полной инициализации
```

### Инфраструктура
```powershell
# Убедитесь, что Docker Desktop запущен, затем:
npm run dev:infra
```

### Отдельные сервисы
```powershell
# API Gateway (из корня проекта)
npm run dev:gateway

# Или из директории api-gateway
cd api-gateway
npm run dev          # Автоматическая перезагрузка при изменениях
npm run start:dev    # Компиляция и запуск один раз

# Auth Service
npm run dev:auth

# User Service
npm run dev:user

# И так далее...
```

### Все сервисы сразу
```powershell
npm run dev:all
```

## Решение проблем

### Docker Desktop не запущен

Если вы видите ошибку о том, что Docker не может подключиться, см. [DOCKER_STARTUP.md](./DOCKER_STARTUP.md)

## Решение проблем

### Health endpoints возвращают 404

Если вы видите `[WARN] Port open but health endpoint not responding` с ошибкой 404, см. [HEALTH_ENDPOINT_404_FIX.md](./HEALTH_ENDPOINT_404_FIX.md)

### Docker Desktop не запущен

Если вы видите ошибки подключения к Docker, см. [DOCKER_STARTUP.md](./DOCKER_STARTUP.md)

## Подробная документация

Полная документация с примерами и решением проблем:
- [CHECKING_SERVICES.md](./docs/development/CHECKING_SERVICES.md)
- [HEALTH_ENDPOINT_404_FIX.md](./HEALTH_ENDPOINT_404_FIX.md) - Решение проблем с health endpoints
- [DOCKER_STARTUP.md](./DOCKER_STARTUP.md) - Решение проблем с Docker
- [DOCKER_STARTUP.md](./DOCKER_STARTUP.md) - Решение проблем с Docker

## Полезные команды

```powershell
# Проверить процессы Node.js
Get-Process -Name node | Measure-Object | Select-Object Count

# Проверить порты в диапазоне 3000-3100
Get-NetTCPConnection -State Listen | Where-Object { $_.LocalPort -ge 3000 -and $_.LocalPort -le 3100 }

# Проверить Docker контейнеры
docker ps
```

